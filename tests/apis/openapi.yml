openapi: "3.0.3"
info:
  title: "Gateway API"
  description: "A gateway API handling multiple services"
  version: "1.0.0"
servers:
- url: "http://127.0.0.1:8083"
  description: "Local Server"

############################################
# Routes
############################################

paths:
  /messages:
    get:
      summary: "Returns all messages"
      description: "Returns all message registered with Monitor-service. Assumed implementation forwards the request to Monitor and returns the result."
      responses:
        "200":
          description: "OK"
          content:
            'text/plain':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Log"

  /state:
    get:
      summary: "Get the value of state"
      description: "Get the value of state"
      responses:
        "200":
          description: "OK"
          content:
            'text/plain':
              schema:
                $ref: "#/components/schemas/State"

  /mqstatistic:
    get:
      summary: "Return RabbitMQ statistics"
      description: "Return core overall statistics and, for each queue, “message delivery rate”,
        “messages publishing rate”, “messages delivered recently”, “message published
        lately”."
      responses:
        "200":
          description: "OK"
          content:
            'application/json':
              schema:
                $ref: "#/components/schemas/Statistics"

############################################
# Definitions
############################################

components:
  schemas:
    Log:
      description: "a log line from either service1 or service2"
      type: string
      example: "SND 1 2022-10-01T06:35:01.373Z 192.168.2.22:8000"
    State:
      description: "state of the application. Possible states are \"INIT\", \"PAUSED\", \"RUNNING\", \"SHUTDOWN\"."
      type: string
      example: "PAUSED"
    Statistics:
      description: "RabbitMQ statistics"
      type: object